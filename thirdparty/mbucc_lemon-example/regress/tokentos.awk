# lemon token header file --> C routine to convert int to token name

BEGIN {
	print ""
	print "// Generated by tokentos.awk"
	print "#include <err.h>"
	print ""
	print "const char *"
	print "tokentos(int token)"
	print "{"
	print "	switch (token) {"
}

/^#define / {
	tokenname = $2
	# TOK_ = %token_prefix, defined in lemon grammar file.
	sub(/TOK_/, "", tokenname)
	intval = $3
	printf "	case %d: return \"%s\"; break;\n", intval, tokenname
}

END {
	print "	default: errx(1, \"unexpected token %d\", token); break;"
	print "	}"
	print "}"
	print ""
}
