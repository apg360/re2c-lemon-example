CFLAGS := $(CFLAGS) -std=c99
CC=/usr/bin/cc

dateparser.o: dategrammar.c dateparser.c


#
# Don't use dategrammar.h as a target
# as the header file is not regenerated by
# lemon if there was no change in tokens names. 
# Using dategrammar.c is sufficient
# becase generating .c will always create the .h as well.
# 
dategrammar.c: dategrammar.y lemon
	./lemon dategrammar.y


lemon: lemon.c
	${CC} -o lemon lemon.c

test: dategrammar.c
	(cd regress ; make )


clean:
	rm -f *.o
	rm -f *.out
	rm -f tmp.c t.c
	rm -f dategrammar.c dategrammar.h
	rm -f  lemon
	(cd regress ; make clean)
